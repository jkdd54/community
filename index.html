<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Site</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@worldcoin/idkit@1.0.1/dist/index.umd.min.js"></script>
    <style>
        body {
            font-family: 'Press Start 2P', cursive;
        }

        .container-center {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            text-align: center;
        }

        .logo {
            max-width: 20%;
            height: auto;
        }

        .typing {
            font-size: 1.25rem;
            white-space: pre-wrap;
            overflow: hidden;
            border-right: 0.15em solid orange;
            margin-top: 20px;
            width: 80%;
            max-width: 600px;
        }

        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: orange }
        }

        nav {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
        }

        nav a {
            font-family: 'Press Start 2P', cursive;
        }
    </style>
</head>
<body class="bg-gray-100">
    <nav class="p-4 text-black">
        <a href="index.html" class="mr-4">Home</a>
        <a href="create_post.html" class="mr-4">Create Post</a>
        <a href="post_list.html" class="mr-4">All Posts</a>
        <button id="login-button" class="bg-blue-600 text-white px-4 py-2 rounded-md">월드 ID로 로그인</button>
    </nav>
    <div class="container-center">
        <img src="logo.svg" alt="Logo" class="logo mx-auto">
        <div class="typing text-gray-700" id="typing-text">
            월드 커뮤니티는 세계 최초로 월드 ID만 사용하는 완전 영지식 증명 커뮤니티입니다.
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const textElement = document.getElementById('typing-text');
            const text = textElement.textContent;
            textElement.textContent = '';

            let index = 0;

            function type() {
                if (index < text.length) {
                    textElement.textContent += text.charAt(index);
                    index++;
                    setTimeout(type, 50);
                } else {
                    textElement.style.borderRight = 'none';
                }
            }

            type();
        });

        window.onload = () => {
            const widgetConfig = {
                app_id: 'app_82a1bab466c1d1ae219e5049512aef97',
                action: 'koreandev',
                signal: 'login',
                onSuccess: (proof) => {
                    console.log('Authenticated:', proof);
                    localStorage.setItem('worldID', JSON.stringify(proof));
                    window.location.reload();
                },
                onError: (error) => {
                    console.error('Authentication failed:', error);
                }
            };

            const worldIDWidget = new IDKitWidget(widgetConfig);

            document.getElementById('login-button').addEventListener('click', () => {
                console.log("Login button clicked");
                worldIDWidget.open();
            });
        }
    </script>
</body>
</html>
